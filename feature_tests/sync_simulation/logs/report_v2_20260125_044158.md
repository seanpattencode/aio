# Sync Strategy Simulation Report v2

Log: /home/seanpatten/projects/aio/feature_tests/sync_simulation/logs/mc_v2_20260125_044051.jsonl

## Summary

| Strategy | Consistency | Avg Active Items | Notes |
|----------|-------------|------------------|-------|
| last_write_wins | 100% | 0.0 | Data loss, forces agreement |
| append_only_log | 9% | 16.0 | Preserves all, immutable events |
| hybrid_logical_clock | 9% | 16.0 | Causal ordering, CockroachDB-style |
| crsqlite_lww | 9% | 16.0 | Per-field CRDT, cr-sqlite style |
| wal_streaming | 9% | 16.0 | Litestream-style WAL replay |
| jsonl_append | 19% | 42.4 | Simplest, git-friendly |

## Recommendations for aio

1. **jsonl_append** or **append_only_log** - simplest, zero conflicts
2. Archive instead of delete - `{..., _archived_by: event_id}`
3. Rename = archive old + create new
4. Store as `events.jsonl` - git merges automatically
5. Rebuild `state.db` on startup from events

## Libraries to Consider

- [eventsourcing](https://pypi.org/project/eventsourcing/) - Python event sourcing
- [cr-sqlite](https://github.com/vlcn-io/cr-sqlite) - CRDT SQLite extension
- [Litestream](https://litestream.io/) - SQLite WAL streaming
- SQLite WAL mode - natural append-only until checkpoint